<section fxLayout="column" fxLayoutGap="10px" fxLayoutAlign="start" style="padding:10px; overflow: auto; flex: 1 1 0%;">
    <div class="form-loading-shade" *ngIf="isLoading">
        <mat-spinner></mat-spinner>
    </div>

    <section fxFlex fxLayout="row">
        <section fxFlex></section>

        <mat-card fxFlex="97" fxLayout="column">
            <mat-tab-group>
                <mat-tab label="LUGAR">
                    <div class="flex-fill flex-column flex-gap">
                        <mat-card class="flex-column flex-gap xs-max-height-user-form" style="padding: 8px;" [formGroup]="principalForm">
                            <div class="flex-row flex-xs-column flex-fill flex-gap">
                                <mat-form-field fxFlex appearance="fill">
                                    <mat-label>FECHA</mat-label>
                                    <input matInput [matDatepicker]="fecha_picker" autocomplete="off" (click)="fecha_picker.open()" formControlName="fecha" placeholder="FECHA" required>
                                    <mat-datepicker-toggle matPrefix [for]="fecha_picker"></mat-datepicker-toggle>
                                    <mat-datepicker #fecha_picker [disabled]="false"></mat-datepicker>
                                    <mat-error *ngIf="principalForm.get('fecha').invalid && ( principalForm.get('fecha').dirty ||  principalForm.get('fecha').touched)">
                                        <span *ngIf="principalForm.get('fecha').hasError('pattern')">La FECHA es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field fxFlex appearance="fill">
                                    <mat-label>HORA</mat-label>
                                    <input [ngxTimepicker]="picker" matInput formControlName="hora" placeholder="HH:MM">
                                    <ngx-material-timepicker #picker></ngx-material-timepicker>
                                    <!--<input matInput formControlName="hora" placeholder="HH:MM" required autocomplete="off">
                                    <mat-error *ngIf=" principalForm.get('hora').invalid && ( principalForm.get('hora').dirty ||  principalForm.get('hora').touched)">
                                        <span *ngIf=" principalForm.get('hora').hasError('pattern')">La HORA es un campo obligatorio</span>
                                    </mat-error>-->
                                </mat-form-field>
                                <mat-form-field fxFlex appearance="fill">
                                    <mat-label>ENTIDAD</mat-label>
                                    <mat-select formControlName="entidad" required>
                                        <mat-option [value]="1">CHIAPAS</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field fxFlex appearance="fill">
                                    <mat-label>MUNICIPIO</mat-label>
                                    <mat-select formControlName="municipio" required>
                                        <mat-option *ngFor="let item of catalogos['Municipio']" [value]="item.id">{{ item.descripcion }}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field fxFlex fxFlex.xs="100" appearance="fill">
                                    <mat-label>LOCALIDAD</mat-label>
                                    <input matInput formControlName="localidad" placeholder="LOCALIDAD" required autocomplete="off">
                                    <mat-error *ngIf=" principalForm.get('localidad').invalid && ( principalForm.get('localidad').dirty ||  principalForm.get('localidad').touched)">
                                        <span *ngIf=" principalForm.get('localidad').errors.required">El LOCALIDAD es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="flex-row flex-xs-column flex-fill flex-gap">
                                <mat-form-field appearance="fill" fxFlex="15">
                                    <mat-label>COLONIA</mat-label>
                                    <input matInput formControlName="colonia" placeholder="COLONIA" required autocomplete="off">
                                    <mat-error *ngIf=" principalForm.get('colonia').invalid && ( principalForm.get('colonia').dirty ||  principalForm.get('colonia').touched)">
                                        <span *ngIf=" principalForm.get('colonia').errors.required">El COLONIA es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field appearance="fill" fxFlex>
                                    <mat-label>CALLE</mat-label>
                                    <input matInput formControlName="calle" placeholder="CALLE" required autocomplete="off">
                                    <mat-error *ngIf=" principalForm.get('calle').invalid && ( principalForm.get('calle').dirty ||  principalForm.get('calle').touched)">
                                        <span *ngIf=" principalForm.get('calle').errors.required">El CALLE es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field appearance="fill" fxFlex="8">
                                    <mat-label>NÂ°</mat-label>
                                    <input matInput formControlName="no" placeholder="No" required autocomplete="off">
                                    <mat-error *ngIf=" principalForm.get('no').invalid && ( principalForm.get('no').dirty ||  principalForm.get('no').touched)">
                                        <span *ngIf=" principalForm.get('no').errors.required">El No es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field appearance="fill" fxFlex="8">
                                    <mat-label>C.P.</mat-label>
                                    <input matInput formControlName="cp" placeholder="C.P." required autocomplete="off">
                                    <mat-error *ngIf=" principalForm.get('cp').invalid && ( principalForm.get('cp').dirty ||  principalForm.get('cp').touched)">
                                        <span *ngIf=" principalForm.get('cp').errors.required">El CP es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field appearance="fill" fxFlex="10">
                                    <mat-label>LATITUD</mat-label>
                                    <input matInput formControlName="latitud" placeholder="LATITUD" required autocomplete="off">
                                    <mat-error *ngIf=" principalForm.get('latitud').invalid && ( principalForm.get('latitud').dirty ||  principalForm.get('latitud').touched)">
                                        <span *ngIf=" principalForm.get('latitud').errors.required">El LATITUD es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field appearance="fill" fxFlex="10">
                                    <mat-label>LONGITUD</mat-label>
                                    <input matInput formControlName="longitud" placeholder="LONGITUD" required autocomplete="off">
                                    <mat-error *ngIf=" principalForm.get('longitud').invalid && ( principalForm.get('longitud').dirty ||  principalForm.get('longitud').touched)">
                                        <span *ngIf=" principalForm.get('longitud').errors.required">El LONGITUD es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </mat-card>        

                    </div>

                    <section>
                        <agm-map style="height: 600px;width: 100%;" [latitude]="latitud" [longitude]="longitud" [zoom]="zoom" [disableDefaultUI]="false" (mapClick)="mapClicked($event)">
                            <agm-marker [latitude]="latitudSelected" [longitude]="longitudSelected"></agm-marker>
                        </agm-map>
                    </section>
                    <section fxFlex="none" fxLayout="row" fxLayoutGap="5px">
                        <div fxFlex="none">
                            <button mat-raised-button color="primary" [disabled]="!principalForm.valid || isLoading" (click)="Guardar(1)" *ngIf="permisoGuardar"><mat-icon>save</mat-icon> Guardar</button>
                        </div>
                    </section>
                </mat-tab>
                <mat-tab label="ZONA" [disabled]="editable">
                    <div class="flex-fill flex-column flex-gap">
                        <mat-card class="flex-column flex-gap xs-max-height-user-form" style="padding: 8px;" [formGroup]="zonaForm">
                            <div class="flex-row flex-xs-column flex-fill flex-gap">
                                <mat-form-field fxFlex="50" fxFlex.xs="100" appearance="fill">
                                    <mat-label>Zona</mat-label>
                                    <mat-select formControlName="zona" required #zona (selectionChange)="validarZona(zona.value)">
                                        <mat-option [value]="1">ZONA URBANA</mat-option>
                                        <mat-option [value]="2">ZONA SUBURBANA</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <div fxFlex="50" fxFlex.xs="100" appearance="fill" *ngIf="zona.value == 1">
                                    <section style="padding: 13px;">
                                        <mat-checkbox formControlName="carretera">CARRETERA ESTATAL</mat-checkbox>
                                    </section>
                                </div>
                            </div>
                            <div class="flex-row flex-xs-column flex-fill flex-gap" *ngIf="zona.value == 1">
                                <mat-form-field fxFlex="20" fxFlex.xs="100" appearance="fill">
                                    <mat-label>Â¿Fue IntersecciÃ³n?</mat-label>
                                    <mat-select formControlName="interseccion">
                                        <mat-option [value]="1">SI</mat-option>
                                        <mat-option [value]="2">NO</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field fxFlex="40" fxFlex.xs="100" appearance="fill">
                                    <mat-label>Entre Calle</mat-label>
                                    <input matInput formControlName="calle1" placeholder="Entre calle" autocomplete="off">
                                    <mat-error *ngIf="zonaForm.get('calle1').invalid && (zonaForm.get('calle1').dirty || zonaForm.get('calle1').touched)">
                                        <span *ngIf="zonaForm.get('calle1').errors.required">El Nombre es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                                <mat-form-field appearance="fill" fxFlex>
                                    <mat-label>Y Calle</mat-label>
                                    <input matInput formControlName="calle2" placeholder="Y calle" autocomplete="off">
                                    <mat-error *ngIf="zonaForm.get('calle2').invalid && (zonaForm.get('calle2').dirty || zonaForm.get('calle2').touched)">
                                        <span *ngIf="zonaForm.get('calle2').errors.required">El Nombre es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="flex-row flex-xs-column flex-fill flex-gap" *ngIf="zona.value == 1">
                                <mat-form-field appearance="fill" fxFlex>
                                    <mat-label>Punto de Referencia</mat-label>
                                    <input matInput formControlName="referencia" placeholder="Referencia" autocomplete="off">
                                    <mat-error *ngIf="zonaForm.get('referencia').invalid && (zonaForm.get('referencia').dirty || zonaForm.get('referencia').touched)">
                                        <span *ngIf="zonaForm.get('referencia').errors.required">El Nombre es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="flex-row flex-xs-column flex-fill flex-gap" *ngIf="zona.value == 2">
                                <mat-form-field fxFlex fxFlex.xs="100" appearance="fill">
                                    <mat-label>Tipo Camino</mat-label>
                                    <mat-select formControlName="tipo_camino" #tipoCamino>
                                        <mat-option [value]="1">CAMINO RURAL</mat-option>
                                        <mat-option [value]="2">CARRETERA ESTATAL</mat-option>
                                        <mat-option [value]="3">OTRO</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field appearance="fill" fxFlex *ngIf="tipoCamino.value == 3">
                                    <mat-label>Otro Camino</mat-label>
                                    <input matInput formControlName="otro_camino" placeholder="Otro Camino" autocomplete="off">
                                    <mat-error *ngIf="zonaForm.get('otro_camino').invalid && (zonaForm.get('otro_camino').dirty || zonaForm.get('otro_camino').touched)">
                                        <span *ngIf="zonaForm.get('otro_camino').errors.required">El Nombre es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="flex-row flex-xs-column flex-fill flex-gap">
                                <mat-form-field fxFlex appearance="fill">
                                    <mat-label>Via</mat-label>
                                    <mat-select formControlName="via" #via>
                                        <mat-option [value]="1">PAVIMENTADA</mat-option>
                                        <mat-option [value]="2">NO PAVIMENTADA</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field fxFlex appearance="fill" *ngIf="via.value == 1">
                                    <mat-label>Tipo Pavimentado</mat-label>
                                    <mat-select formControlName="tipo_pavimentado">
                                        <mat-option [value]="1">ASFALTO</mat-option>
                                        <mat-option [value]="2">CONCRETO</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <div fxFlex *ngIf="via.value == 2" fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px">
                                    <mat-form-field fxFlex appearance="fill">
                                        <mat-label>Tipo Via</mat-label>
                                        <mat-select formControlName="tipo_via" #tipoCamino (selectionChange)="campoOtro(tipoCamino.value)">
                                            <mat-option [value]="1">TERRACERIA</mat-option>
                                            <mat-option [value]="2">EMPEDRADO</mat-option>
                                            <mat-option [value]="3">OTRO</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <mat-form-field fxFlex appearance="fill" *ngIf="tipoCamino.value== 3">
                                        <mat-label>Otro Tipo de Via</mat-label>
                                        <input matInput formControlName="otro_tipo_via" placeholder="Otro Tipo Via" autocomplete="off">
                                        <mat-error *ngIf="zonaForm.get('otro_tipo_via').invalid && (zonaForm.get('otro_tipo_via').dirty || zonaForm.get('otro_tipo_via').touched)">
                                            <span *ngIf="zonaForm.get('otro_tipo_via').errors.required">El Nombre es un campo obligatorio</span>
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                        </mat-card>
                    </div>            

                        
                    <section fxFlex="none" fxLayout="row" fxLayoutGap="5px">
                        <div fxFlex="none">
                            <button mat-raised-button color="primary" [disabled]="!zonaForm.valid || isLoading" (click)="Guardar(2)"  *ngIf="permisoGuardar"><mat-icon>save</mat-icon> Guardar</button>
                        </div>
                    </section>
                

                </mat-tab>
                <mat-tab label="TIPO" [disabled]="editable">
                    <div class="flex-fill flex-column flex-gap">
                        <mat-card class="flex-column flex-gap xs-max-height-user-form" style="padding: 8px;" [formGroup]="tipoAccidenteForm">
                            <div class="flex-row flex-xs-column flex-fill flex-gap">
                                <div fxFlex="33" fxFlex.xs="100" appearance="fill">
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_1" #tipo1 (click)="verificacionTipo(tipo1.checked)">ColisiÃ³n con vehÃ­culo automotor</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_2" #tipo2 (click)="verificacionTipo(tipo2.checked)">Atropellamiento</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_3" #tipo3 (click)="verificacionTipo(tipo3.checked)">ColisiÃ³n con animal</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_4" #tipo4 (click)="verificacionTipo(tipo4.checked)">ColisiÃ³n con objeto fijo</mat-checkbox>
                                    </div>
                                </div>
                                <div fxFlex="33" fxFlex.xs="100" appearance="fill">
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_5" #tipo5 (click)="verificacionTipo(tipo5.checked)">Volcadura</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_6" #tipo6 (click)="verificacionTipo(tipo6.checked)">CaÃ­da de pasaje</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_7" #tipo7 (click)="verificacionTipo(tipo7.checked)">Salida de camino</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_8" #tipo8 (click)="verificacionTipo(tipo8.checked)">Incendio</mat-checkbox>
                                    </div>
                                </div>
                                <div fxFlex="33" fxFlex.xs="100" appearance="fill">
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_9" #tipo9 (click)="verificacionTipo(tipo9.checked)">ColisiÃ³n con ferrocarril</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_10" #tipo10 (click)="verificacionTipo(tipo10.checked)">ColisiÃ³n con motocicleta</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_11" #tipo11 (click)="verificacionTipo(tipo11.checked)">ColisiÃ³n con ciclista</mat-checkbox>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <mat-checkbox formControlName="tipoAccidente_12" #tipo12 (click)="verificacionTipo(tipo12.checked)" #otroTipoAccidente>Otro</mat-checkbox>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex-row flex-xs-column flex-fill flex-gap" *ngIf="otroTipoAccidente.checked == true">
                                <mat-form-field appearance="fill" fxFlex>
                                    <mat-label>Otro Tipo Accidente</mat-label>
                                    <input matInput formControlName="otro_tipo_accidente" placeholder="Otro Tipo Accidente">
    
                                </mat-form-field>
                            </div>
                            <div class="flex-row flex-xs-column flex-fill flex-gap">
                                <button mat-raised-button color="primary" (click)="showVehiculoDialog(null)"  *ngIf="permisoGuardar"><mat-icon>add_circle</mat-icon>AGREGAR VEHICULO</button>
                            </div>
                            <div class="flex-row flex-xs-column flex-fill flex-gap">
                                <div fxFlex.xs="100" fxFlex style="padding: 10pt; background-color: beige;">
                                    No. DE VEHÃCULOS {{ datosVehiculo.length }}
                                </div>
                            </div>
                        </mat-card>
                    </div> 
                    <mat-card class="table-card flex-fill">
                        <div class="flex-column" style="height: 100%;">
                            <div class="main-list-table left-click-open flex-fill">
                                <table #dataTable mat-table [dataSource]="dataSourceVehiculos" class="data-table" matSort>
                                    <ng-container matColumnDef="tipo">
                                        <th mat-header-cell *matHeaderCellDef> Tipo </th>
                                        <td mat-cell *matCellDef="let row">
                                            {{ row.dataTipovehiculo }}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="marca">
                                        <th mat-header-cell *matHeaderCellDef fxHide.xs="true"> Marca / Modelo </th>
                                        <td mat-cell *matCellDef="let row" fxHide.xs="true">
                                            {{ row.dataVehiculo }} {{ row.modelo }}
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="placas">
                                        <th mat-header-cell *matHeaderCellDef fxHide.xs="true"> Placas </th>
                                        <td mat-cell *matCellDef="let row" fxHide.xs="true">
                                            <div *ngIf="row.con_placas == 1">
                                                {{ row.no_placa }}
                                                <div *ngIf="row.placa_pais == 1">
                                                    {{ row.dataEstado}}
                                                </div>
                                            </div>
                                            <div *ngIf="row.con_placas != 1">
                                                SIN PLACAS
                                            </div>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="ocupantes">
                                        <th mat-header-cell *matHeaderCellDef fxHide.xs="true"> Ocupantes </th>
                                        <td mat-cell *matCellDef="let row" fxHide.xs="true">
                                            {{row.no_ocupantes}}
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="actions">
                                        <th mat-header-cell *matHeaderCellDef>ACCIONES</th>
                                        <td mat-cell *matCellDef="let row; let i = index">
                                            <button mat-button [matMenuTriggerFor]="menu">
                                                <mat-icon>more_vert</mat-icon>
                                            </button>

                                            <mat-menu #menu="matMenu">
                                                <button mat-menu-item (click)="editarVehiculo(row, i)"><mat-icon  color="primary">edit</mat-icon>EDITAR</button>
                                                <button mat-menu-item (click)="eliminarVehiculo(row.id)" *ngIf="permisoGuardar"><mat-icon color="primary">delete</mat-icon>ELIMINAR</button>
                                            </mat-menu>

                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="noResultsFound">
                                        <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length">
                                            No se encontraron registros
                                        </td>
                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                    <tr mat-row [ngClass]="{'selected-item': i==selectedItemIndex}" *matRowDef="let row; let i = index; columns: displayedColumns;"></tr>

                                    <tr mat-footer-row *matFooterRowDef="['noResultsFound']" class="not-results-found" [ngClass]="{'hide':!(datosVehiculo!=null && datosVehiculo.length==0)}"></tr>
                                </table>
                            </div>
                        </div>
                    </mat-card>                       
                        <div class="data-container ">
                            <div class="data-table-container">
                                
                            </div>

                        </div>
                        <section fxFlex="none" fxLayout="row" fxLayoutGap="5px">
                            <div fxFlex="none">
                                <button mat-raised-button color="primary" [disabled]=" cantidadTipos<1" (click)="Guardar(3)"  *ngIf="permisoGuardar"><mat-icon>save</mat-icon> Guardar </button>
                            </div>
                        </section>
                    
                </mat-tab>
                <mat-tab label="CAUSAS" [disabled]="editable">
                    <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente" [formGroup]="causasForm">
                        <div fxFlex.xs="100" fxFlex>
                            <mat-checkbox formControlName="causas_1" #chkConductor (click)="VerificaCausa(chkConductor.checked, 1)">Conductor</mat-checkbox>

                        </div>
                        <div fxFlex.xs="100" fxFlex>
                            <mat-checkbox formControlName="causas_2" #chkPeaton (click)="VerificaCausa(chkPeaton.checked, 2)">PeatÃ³n</mat-checkbox>
                        </div>
                        <div fxFlex.xs="100" fxFlex>
                            <mat-checkbox formControlName="causas_3" #chkPasajero (click)="VerificaCausa(chkPasajero.checked, 3)">Pasajero</mat-checkbox>
                        </div>
                        <div fxFlex.xs="100" fxFlex>
                            <mat-checkbox formControlName="causas_4" #chkFalla (click)="VerificaCausa(chkFalla.checked, 4)">Falla del Vehiculo</mat-checkbox>
                        </div>
                        <div fxFlex.xs="100" fxFlex>
                            <mat-checkbox formControlName="causas_5" #chkCamino (click)="VerificaCausa(chkCamino.checked, 5)">Condiciones del camino</mat-checkbox>
                        </div>
                        <div fxFlex.xs="100" fxFlex>
                            <mat-checkbox formControlName="causas_6" #chkAgente (click)="VerificaCausa(chkAgente.checked, 6)">Agentes Naturales</mat-checkbox>
                        </div>
                    </div>
                    <mat-tab-group>
                        <mat-tab label="CONDUCTOR" *ngIf="chkConductor.checked">
                            <section fxflex="none" fxLayout="column" [formGroup]="tipoConductorForm">
                                <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                    <div fxFlex.xs="100" fxFlex>
                                        <ul>
                                            <li>
                                                <mat-checkbox formControlName="tipo_1" #tipo1 (click)="VerificarAccidente(tipo1.checked)">Iba a exceso de velocidad</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_2" #tipo2 (click)="VerificarAccidente(tipo2.checked)">No cediÃ³ el paso</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_3" #tipo3 (click)="VerificarAccidente(tipo3.checked)">Dormitando</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_4" #tipo4 (click)="VerificarAccidente(tipo4.checked)">InvadiÃ³ el carril contrario</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_13" #otroCausa (click)="VerificarAccidente(otroCausa.checked)">Otro</mat-checkbox>
                                            </li>
                                        </ul>

                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <ul>
                                            <li>
                                                <mat-checkbox formControlName="tipo_5" #tipo5 (click)="VerificarAccidente(tipo5.checked)">No guardÃ³ distancia</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_6" #tipo6 (click)="VerificarAccidente(tipo6.checked)">Utilizaba el telÃ©fono mÃ³vil</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_7" #tipo7 (click)="VerificarAccidente(tipo7.checked)">RebasÃ³ indebidamente</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_8" #tipo8 (click)="VerificarAccidente(tipo8.checked)">VirÃ³ indebidamente</mat-checkbox>
                                            </li>
                                        </ul>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex>
                                        <ul>
                                            <li>
                                                <mat-checkbox formControlName="tipo_9" #tipo9 (click)="VerificarAccidente(tipo9.checked)">No respetÃ³ las seÃ±ales viales</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_10" #tipo10 (click)="VerificarAccidente(tipo10.checked)">Deslumbramiento</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_11" #tipo11 (click)="VerificarAccidente(tipo11.checked)">No respetÃ³ el semÃ¡foro</mat-checkbox>
                                            </li>
                                            <li>
                                                <mat-checkbox formControlName="tipo_12" #tipo12 (click)="VerificarAccidente(tipo12.checked)">Presumible estado de ebriedad</mat-checkbox>
                                            </li>
                                        </ul>
                                    </div>

                                </div>


                                <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="3px" *ngIf="otroCausa.checked">
                                    <mat-form-field fxFlex appearance="fill">
                                        <mat-label>Otro</mat-label>
                                        <input matInput formControlName="otro" placeholder="Otro" [required]="otroCausa.checked == true ? true : null ">
                                        <mat-error *ngIf="tipoConductorForm.get('otro').invalid && (tipoConductorForm.get('otro').dirty || tipoConductorForm.get('otro').touched)">
                                            <span *ngIf="tipoConductorForm.get('otro').errors.required">El Otro es un campo obligatorio</span>
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="3px">
                                    <mat-form-field fxFlex appearance="fill">
                                        <mat-label>Sexo</mat-label>
                                        <mat-select formControlName="sexo" required>
                                            <mat-option [value]="1">HOMBRE</mat-option>
                                            <mat-option [value]="2">MUJER</mat-option>
                                            <mat-option [value]="3">SE FUGÃ</mat-option>
                                            <mat-option [value]="4">SE IGNORA</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <mat-form-field fxFlex appearance="fill">
                                        <mat-label>Aliento Alcoholico</mat-label>
                                        <mat-select formControlName="aliento_alcoholico" required>
                                            <mat-option [value]="1">SI</mat-option>
                                            <mat-option [value]="2">NO</mat-option>
                                            <mat-option [value]="3">SE IGNORA</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <mat-form-field fxFlex appearance="fill">
                                        <mat-label>Usaba Cinturon de Seguridad</mat-label>
                                        <mat-select formControlName="cinturon_seguridad" required>
                                            <mat-option [value]="1">SI</mat-option>
                                            <mat-option [value]="2">NO</mat-option>
                                            <mat-option [value]="3">SE IGNORA</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <mat-form-field appearance="fill" fxFlex>
                                        <mat-label>Edad</mat-label>
                                        <input matInput formControlName="edad" placeholder="Edad" autocomplete="off">

                                    </mat-form-field>

                                </div>
                            </section>
                        </mat-tab>
                        <mat-tab label="PEATÃN" [formGroup]="tipoPeatonForm" *ngIf="chkPeaton.checked">
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_1" #tipo1 (click)="VerificarPeaton(tipo1.checked)">CruzÃ³ la calle inapropiadamente</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_2" #tipo2 (click)="VerificarPeaton(tipo2.checked)">SubÃ­a o bajaba del vehÃ­culo</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_3" #tipo3 (click)="VerificarPeaton(tipo3.checked)">No respetÃ³ el semÃ¡foro</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_4" #tipo4 (click)="VerificarPeaton(tipo4.checked)">Presumible estado de ebriedad</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_5" #tipo5 (click)="VerificarPeaton(tipo5.checked)">Empujaba o trabajaba en el vehÃ­culo</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_6" #chkPeatonOtro (click)="VerificarPeaton(chkPeatonOtro.checked)">Otro</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente" *ngIf="chkPeatonOtro.checked">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-form-field appearance="fill" fxFlex>
                                        <mat-label>DescripciÃ³n Otro</mat-label>
                                        <input matInput formControlName="descripcion_otro" placeholder="Descripcion " [required]="chkPeatonOtro.checked == true ? true : null ">
                                        <mat-error *ngIf="tipoPeatonForm.get('descripcion_otro').invalid && (tipoPeatonForm.get('descripcion_otro').dirty || tipoPeatonForm.get('descripcion_otro').touched)">
                                            <span *ngIf="tipoPeatonForm.get('descripcion_otro').errors.required">El Otro es un campo obligatorio</span>
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>

                        </mat-tab>
                        <mat-tab label="PASAJERO" *ngIf="chkPasajero.checked" [formGroup]="tipoPasajeroForm">
                            <mat-form-field appearance="fill" fxFlex>
                                <mat-label>Â¿CÃ³mo fue que el pasajero causo el accidente?</mat-label>
                                <textarea matInput placeholder="Causa" formControlName="causa_pasajero" cdkTextareaAutosize cdkAutosizeMinRows="5" cdkAutosizeMaxRows="5">
                                </textarea>

                                <mat-error *ngIf="tipoPasajeroForm.get('causa_pasajero').invalid && (tipoPasajeroForm.get('causa_pasajero').dirty || tipoPasajeroForm.get('causa_pasajero').touched)">
                                    <span *ngIf="tipoPasajeroForm.get('causa_pasajero').errors.required">El Nombre es un campo obligatorio</span>
                                </mat-error>
                            </mat-form-field>
                        </mat-tab>
                        <mat-tab label="FALLA DE VEHICULO" *ngIf="chkFalla.checked" [formGroup]="fallaForm">
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_1" #tipo1 (click)="VerificarFalla(tipo1.checked)">Llantas</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_2" #tipo2 (click)="VerificarFalla(tipo2.checked)">Ejes</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_3" #tipo3 (click)="VerificarFalla(tipo3.checked)">Frenos</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_4" #tipo4 (click)="VerificarFalla(tipo4.checked)">TransmisiÃ³n</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_5" #tipo5 (click)="VerificarFalla(tipo5.checked)">DirecciÃ³n</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_6" #tipo6 (click)="VerificarFalla(tipo6.checked)">Motor</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_7" #tipo7 (click)="VerificarFalla(tipo7.checked)">SuspensiÃ³n</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_8" #tipo8 (click)="VerificarFalla(tipo8.checked)">Sobrecarga</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_9" #tipo9 (click)="VerificarFalla(tipo9.checked)">Luces</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_10" #tipo10 (click)="VerificarFalla(tipo10.checked)">Exceso de dimensiones</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex="50">
                                    <mat-checkbox formControlName="tipo_11" #chkFallaOtro (click)="VerificarFalla(chkFallaOtro.checked)">Otro</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex="50" *ngIf="chkFallaOtro.checked">
                                    <mat-form-field appearance="fill" fxFlex>
                                        <mat-label>DescripciÃ³n Otro</mat-label>
                                        <input matInput formControlName="descripcion_otro" placeholder="Descripcion " [required]="chkFallaOtro.checked == true ? true : null ">
                                        <mat-error *ngIf="fallaForm.get('descripcion_otro').invalid && (fallaForm.get('descripcion_otro').dirty || fallaForm.get('descripcion_otro').touched)">
                                            <span *ngIf="fallaForm.get('descripcion_otro').errors.required">Otro es un campo obligatorio</span>
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                        </mat-tab>
                        <mat-tab label="CONDICIONES DEL CAMINO" *ngIf="chkCamino.checked" [formGroup]="caminoForm">
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_1" #tipo1 (click)="VerificarCamino(tipo1.checked)">Mala condiciÃ³n de la vÃ­a</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_2" #tipo2 (click)="VerificarCamino(tipo2.checked)">Falta de seÃ±ales</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_3" #tipo3 (click)="VerificarCamino(tipo3.checked)">Objetos en el camino</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_4" #tipo4 (click)="VerificarCamino(tipo4.checked)">Camino mojado o encharcado (vÃ­a mojada)</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_5" #tipo5 (click)="VerificarCamino(tipo5.checked)">VÃ­a resbalosa /presenta un riesgo de resbalar<br>fÃ¡cilmente/provoca falta de adherencia del vehÃ­culo</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_6" #tipo6 (click)="VerificarCamino(tipo6.checked)">ObstrucciÃ³n de la vÃ­a por animales</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_7" #chkCondicionOtro (click)="VerificarCamino(chkCondicionOtro.checked)">Otro</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente" *ngIf="chkCondicionOtro.checked">
                                <mat-form-field appearance="fill" fxFlex>
                                    <mat-label>DescripciÃ³n Otro</mat-label>
                                    <input matInput formControlName="descripcion_otro" placeholder="Descripcion " [required]="chkCondicionOtro.checked == true ? true : null ">
                                    <mat-error *ngIf="caminoForm.get('descripcion_otro').invalid && (caminoForm.get('descripcion_otro').dirty || caminoForm.get('descripcion_otro').touched)">
                                        <span *ngIf="caminoForm.get('descripcion_otro').errors.required">Otro es un campo obligatorio</span>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </mat-tab>
                        <mat-tab label="AGENTES NATURALES" *ngIf="chkAgente.checked" [formGroup]="agentesForm">
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_1" #tipo1 (click)="VerificarAgentes(tipo1.checked)">Llovizna</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_2" #tipo2 (click)="VerificarAgentes(tipo2.checked)">Neblina</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_3" #tipo3 (click)="VerificarAgentes(tipo3.checked)">Lluvia</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_4" #tipo4 (click)="VerificarAgentes(tipo4.checked)">Humo</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_5" #tipo5 (click)="VerificarAgentes(tipo5.checked)">Aguacero</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_6" #tipo6 (click)="VerificarAgentes(tipo6.checked)">Tolvanera</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_7" #tipo7 (click)="VerificarAgentes(tipo7.checked)">Nieve</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_8" #tipo8 (click)="VerificarAgentes(tipo8.checked)">Vientos fuertes</mat-checkbox>
                                </div>
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_9" #tipo9 (click)="VerificarAgentes(tipo9.checked)">Granizo</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-checkbox formControlName="tipo_10" #chkAgenteOtro (click)="VerificarAgentes(chkAgenteOtro.checked)">Otro</mat-checkbox>
                                </div>
                            </div>
                            <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px" class="listaAccidente">
                                <div fxFlex.xs="100" fxFlex>
                                    <mat-form-field appearance="fill" fxFlex *ngIf="chkAgenteOtro.checked">
                                        <mat-label>DescripciÃ³n Otro</mat-label>
                                        <input matInput formControlName="descripcion_otro" placeholder="Descripcion " [required]="chkAgenteOtro.checked == true ? true : null ">
                                        <mat-error *ngIf="agentesForm.get('descripcion_otro').invalid && (agentesForm.get('descripcion_otro').dirty || agentesForm.get('descripcion_otro').touched)">
                                            <span *ngIf="agentesForm.get('descripcion_otro').errors.required">Otro es un campo obligatorio</span>
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                        </mat-tab>
                    </mat-tab-group>
                    <section fxFlex="none" fxLayout="row" fxLayoutGap="5px">
                        <div fxFlex="none">
                            <button mat-raised-button color="primary" [disabled]="(cantidadCausas<=0 ||(chkConductor.checked?(!tipoConductorForm.valid || cantidadAccidente<=0) :false) || (chkPeaton.checked?(!tipoPeatonForm.valid || cantidadPeaton<=0) :false) || (chkPasajero.checked?!tipoPasajeroForm.valid :false) || (chkFalla.checked?(!fallaForm.valid || cantidadFalla<=0) :false) || (chkCamino.checked?(!caminoForm.valid || cantidadCamino<=0) :false) || (chkAgente.checked?(!agentesForm.valid || cantidadAgentes<=0) :false))"
                                (click)="Guardar(4)"  *ngIf="permisoGuardar"><mat-icon>save</mat-icon> Guardar</button>
                        </div>
                    </section>
                </mat-tab>
                <mat-tab label="VICTIMAS" [disabled]="editable">
                    <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px">
                        <button mat-raised-button color="primary" (click)="showVictimaDialog(null)"  *ngIf="permisoGuardar"><mat-icon>add_circle</mat-icon>AGREGAR VICTIMA</button>
                    </div>
                    <div fxLayout.gt-sm="row" fxLayout="column" fxLayoutGap.gt-sm="10px">
                        <div fxFlex.xs="100" fxFlex style="padding: 10pt; background-color: beige;">
                            No. DE LESIONADOS {{ cantidadLesionados }}
                        </div>
                        <div fxFlex.xs="100" fxFlex style="padding: 10pt; background-color: beige;">
                            No. DE FALLECIMIENTOS {{ cantidadFallecidos }}
                        </div>

                    </div>
                    <div class="data-container ">
                        <div class="data-table-container">
                            <table #dataTable mat-table [dataSource]="dataSourceVictima" class="data-table" matSort>
                                <ng-container matColumnDef="tipo">
                                    <th mat-header-cell *matHeaderCellDef> Tipo </th>
                                    <td mat-cell *matCellDef="let row">
                                        {{ row.dataTipovictima }}
                                        <div *ngIf="row.tipo_id == 2">
                                            {{ row.dataValidacion }} - {{ row.no_acta_certificacion }}
                                        </div>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="nombre">
                                    <th mat-header-cell *matHeaderCellDef fxHide.xs="true"> Nombre </th>
                                    <td mat-cell *matCellDef="let row" fxHide.xs="true">
                                        <div *ngIf="row.anonimo == 1">
                                            SE IGNORA
                                        </div>
                                        <div *ngIf="row.ignora_nombre == null">
                                            {{ row.nombre }} {{ row.apellido_paterno }} {{ row.apellido_materno }}
                                        </div>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="usuario">
                                    <th mat-header-cell *matHeaderCellDef fxHide.xs="true"> Usuario </th>
                                    <td mat-cell *matCellDef="let row" fxHide.xs="true">
                                        {{ row.dataTipousuario }}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="hospitalizacion">
                                    <th mat-header-cell *matHeaderCellDef fxHide.xs="true"> Hospitalizacion </th>
                                    <td mat-cell *matCellDef="let row" fxHide.xs="true">
                                        <!--div *ngIf="row.hospitalizacion == 1">
                                            {{ row.clues_hospitalizacion.clues }} {{ row.clues_hospitalizacion.descripcion }} - {{ row.clues_hospitalizacion.clave_institucion }}
                                        </div-->
                                        <div *ngIf="row.hospitalizacion == 2">
                                            NO HOSPITALIZADO
                                        </div>

                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="actions">
                                    <th mat-header-cell *matHeaderCellDef>ACCIONES</th>
                                    <td mat-cell *matCellDef="let row; let i = index">
                                        <button mat-button [matMenuTriggerFor]="menu">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>

                                        <mat-menu #menu="matMenu">
                                            <button mat-menu-item (click)="editarVictima(row, i)"><mat-icon  color="primary">edit</mat-icon>EDITAR</button>
                                            <button mat-menu-item (click)="eliminarVictima(row.id)" *ngIf="permisoGuardar"><mat-icon color="primary">delete</mat-icon>ELIMINAR</button>

                                        </mat-menu>

                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="noResultsFound">
                                    <td mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length">
                                        No se encontraron registros
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayColumns; sticky: true"></tr>
                                <tr mat-row [ngClass]="{'selected-item': i==selectedItemIndex}" *matRowDef="let row; let i = index; columns: displayColumns;"></tr>

                                <tr mat-footer-row *matFooterRowDef="['noResultsFound']" class="not-results-found" [ngClass]="{'hide':!(datosVictima!=null && datosVictima.length==0)}"></tr>
                            </table>
                        </div>
                    </div>
                    <section fxFlex="none" fxLayout="row" fxLayoutGap="5px">
                        <div fxFlex="none">
                            <button mat-raised-button color="primary" (click)="Guardar(5)"  *ngIf="permisoGuardar"><mat-icon>save</mat-icon> Guardar</button>
                        </div>
                    </section>
                </mat-tab>
                <mat-tab label="FOTOGRAFIAS" [disabled]="editable" [formGroup]="formFotos" *ngIf="false">
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px" style="margin-top:10px">
                        <div fxFlex="50" fxFlex.xs="100">
                            <input type="file" formControlName="file" class="form-control" accept="image/jpeg" multiple (change)="fileChange($event)">
                        </div>
                        <div fxFlex="50" fxFlex.xs="100">
                            <button type="button" mat-raised-button color="primary" (click)="subir();"  *ngIf="permisoGuardar">SUBIR IMAGENES</button>

                        </div>
                    </div>
                    <hr>
                    <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap.gt-sm="5px" class="listaAccidente">
                        <div fxFlex>
                            FOTOGRAFIAS
                        </div>
                    </div>
                    <HR>
                    <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap.gt-sm="5px" class="listaAccidente">
                        <div fxFlex.xs="25" fxFlex *ngFor="let item of arregloFotos">
                            <mat-card>
                                <img mat-card-image src="data:image/png;base64,{{ item.imagen }}" style="height: 100pt; width:auto; display:block; margin:auto; cursor:pointer" (click)="ver(item.imagen)">
                                <mat-card-actions>
                                    <button mat-mini-fab color="warn" (click)="eliminaImagen(item.nombre_imagen)"><mat-icon>delete</mat-icon></button>
                                </mat-card-actions>
                            </mat-card>

                        </div>
                    </div>
                </mat-tab>
                <!--mat-tab label="DOCUMENTOS" [disabled]="editable" [formGroup]="formArchivos">
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="5px" style="margin-top:10px">
                        <div fxFlex="50" fxFlex.xs="100">
                            <input type="file" formControlName="file" class="form-control" accept="application/pdf" multiple (change)="fileChangeDocument($event)">
                        </div>
                        <div fxFlex="50" fxFlex.xs="100">
                            <button type="button" mat-raised-button color="primary" (click)="subirDocumento();"  *ngIf="permisoGuardar">SUBIR DOCUMENTOS</button>
                        </div>
                    </div>
                    <hr>
                    <table #dataTable mat-table [dataSource]="dataSourceDocumentos" class="data-table" matSort>
                        <ng-container matColumnDef="nombre">
                            <th mat-header-cell *matHeaderCellDef> Tipo </th>
                            <td mat-cell *matCellDef="let row">
                                {{ row.nombre }}
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>ACCIONES</th>
                            <td mat-cell *matCellDef="let row; let i = index">
                                <button mat-button [matMenuTriggerFor]="menu">
                                    <mat-icon>more_vert</mat-icon>
                                </button>

                                <mat-menu #menu="matMenu">
                                    <button mat-menu-item (click)="eliminarDocumento(row.id)"><mat-icon color="primary" *ngIf="permisoGuardar">delete</mat-icon>ELIMINAR</button>
                                    <button mat-menu-item (click)="verDocumento(row.id)"><mat-icon color="primary">remove_red_eye</mat-icon>VER</button>
                                </mat-menu>

                            </td>
                        </ng-container>

                        <ng-container matColumnDef="noResultsFound">
                            <td mat-footer-cell *matFooterCellDef [attr.colspan]="ColumnsDocuments.length">
                                No se encontraron registros
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="ColumnsDocuments; sticky: true"></tr>
                        <tr mat-row [ngClass]="{'selected-item': i==selectedItemIndex}" *matRowDef="let row; let i = index; columns: ColumnsDocuments;"></tr>

                        <tr mat-footer-row *matFooterRowDef="['noResultsFound']" class="not-results-found" [ngClass]="{'hide':!(datosDocumentos!=null && datosDocumentos.length==0)}"></tr>
                    </table>
                </mat-tab-->
            </mat-tab-group>



        </mat-card>
        <section fxFlex></section>
    </section>

</section>